# Daily Podcast Workflow Documentation

Complete 24-hour automated workflow for Daily Tech Digest podcast generation and distribution.

## Overview

Automated system that monitors RSS feeds and YouTube channels, processes new content into transcripts, generates AI-powered daily digest episodes, and publishes them via GitHub releases to a stable RSS feed.

## Daily Workflow Process

### Phase 1: Content Discovery (5-10 minutes)

**Script**: `enhanced_pipeline.py`

1. **RSS Feed Monitoring**
   - Check configured RSS feeds for episodes released in past 24 hours
   - Download audio files for new episodes
   - Store episode metadata in SQLite database

2. **YouTube Content Monitoring** 
   - Monitor specified YouTube channels for new videos
   - Extract video transcripts using YouTube Transcript API
   - Store transcript data in database

3. **Database Updates**
   - Update episode status tracking
   - Mark episodes as downloaded/processed
   - Clean up old processed audio files

### Phase 2: Content Processing (10-20 minutes)

**Scripts**: `content_processor.py`, `content_analyzer.py`

1. **Audio Transcription**
   - Convert downloaded audio to text using Parakeet MLX ASR
   - Handle chunking for large audio files
   - Store transcripts in database

2. **Content Analysis**
   - Analyze transcripts for key topics and themes
   - Extract actionable insights and key points
   - Categorize content by topic areas:
     - AI Tools & Innovation
     - Creative Applications  
     - Social Commentary & Industry Trends

3. **Content Aggregation**
   - Compile all transcripts from past 24 hours
   - Remove duplicates and redundant information
   - Organize by topic categories

### Phase 3: AI Digest Generation (5-15 minutes)

**Scripts**: `digest_generator.py`, `claude_tts_generator.py`

1. **Content Synthesis**
   - Send aggregated content to Claude API
   - Generate structured daily digest following template
   - Focus on actionable insights and key developments

2. **Topic Organization**
   - Break digest into topic-based segments:
     - Introduction (30-60 seconds)
     - AI Tools segment (2-4 minutes)
     - Creative Applications segment (2-4 minutes) 
     - Social Commentary segment (2-4 minutes)
     - Outro with key takeaways (30-60 seconds)

3. **TTS Generation**
   - Convert text segments to speech using ElevenLabs API
   - Use different voices for variety:
     - Host voice: Primary narration
     - Expert voice: Technical insights
     - Conversational voice: Commentary
   - Add music transitions between segments

4. **Audio Compilation**
   - Combine all segments into single MP3 file
   - Format: `complete_topic_digest_YYYYMMDD_HHMMSS.mp3`
   - Typical duration: 7-12 minutes

### Phase 4: Publishing & Distribution (2-5 minutes)

**Scripts**: `deploy_episode.py`, GitHub Actions workflow

1. **Episode Deployment**
   - Create GitHub release with unique episode title
   - Upload MP3 file to release assets
   - Generate release notes with episode highlights
   - Tag format: `daily-YYYY-MM-DD` or `daily-YYYY-MM-DD-HHMM` for multiple episodes

2. **RSS Feed Updates**
   - Vercel function automatically fetches from GitHub releases API
   - Updates RSS feed at `https://podcast.paulrbrown.org/daily-digest.xml`
   - No manual intervention required

3. **Content Cleanup**
   - Delete processed audio files to save disk space
   - Maintain 7-day retention for GitHub releases
   - Clean up temporary TTS files

## Key Scripts & Functions

### Core Pipeline Scripts

- **`enhanced_pipeline.py`**: Main orchestration script
- **`content_processor.py`**: Audio transcription and processing  
- **`content_analyzer.py`**: Content analysis and categorization
- **`digest_generator.py`**: Claude API integration for content synthesis
- **`claude_tts_generator.py`**: TTS generation and audio compilation
- **`deploy_episode.py`**: GitHub releases deployment

### Supporting Scripts

- **`cleanup_old_episodes.py`**: Local file cleanup
- **`cleanup_github_releases.py`**: GitHub releases retention management
- **`episode_status.py`**: Database status tracking
- **`failure_analyzer.py`**: Error analysis and recovery

### Infrastructure

- **`api/rss.py`**: Vercel function for RSS feed generation
- **`.github/workflows/deploy-rss.yml`**: Automated release deployment
- **`vercel.json`**: Vercel configuration for RSS routing

## Episode Title Generation

Episodes receive unique titles based on content analysis:

- **AI Renaissance: Tools, Creativity & Society** - Comprehensive AI coverage
- **Tech Tuesday: Innovation Roundup** - Product launches and trends
- **Morning Briefing: Tech Pulse** - Breaking tech developments

Titles are generated by analyzing topic segments and creating engaging, descriptive names that reflect episode content.

## Technical Architecture

### Storage & Distribution
- **GitHub Releases**: MP3 file hosting with instant global CDN
- **Vercel Functions**: Dynamic RSS generation from GitHub API
- **SQLite Database**: Local episode tracking and metadata

### Content Sources
- RSS Feeds: Podcast episode monitoring
- YouTube: Video transcript extraction
- Claude API: Content synthesis and digest generation
- ElevenLabs: Text-to-speech conversion

### Quality Controls
- Automated transcript processing with chunking
- Content deduplication and filtering
- Error handling with retry logic
- 7-day retention policy for storage management

## Manual Execution

To run workflow manually:
```bash
# Complete workflow
python3 enhanced_pipeline.py

# Individual phases
python3 content_processor.py
python3 digest_generator.py  
python3 claude_tts_generator.py
python3 deploy_episode.py
```

## Automation Setup

### GitHub Actions (Future)
- Schedule daily execution via cron
- Handle failures with retry logic
- Notify on completion/errors

### Local Scheduling (Current)
- Use cron or systemd timers for daily execution
- Monitor logs for issues
- Manual intervention for complex failures

## Output Specifications

### RSS Feed Format
- Standard RSS 2.0 with iTunes extensions
- 7-day episode retention
- Optimized for Android/iOS podcast apps
- Stable URL: `https://podcast.paulrbrown.org/daily-digest.xml`

### Episode Specifications
- Duration: 7-12 minutes typical
- Format: MP3, 128kbps
- Size: 7-12MB typical
- Unique titles reflecting content themes
- Comprehensive show notes with highlights

## Maintenance Tasks

### Daily (Automated)
- Content monitoring and processing
- Digest generation and publishing
- RSS feed updates

### Weekly (Manual)
- Review failed episodes and retry if needed
- Check storage usage and cleanup
- Verify RSS feed health

### Monthly (Manual)  
- Update content source configurations
- Review and optimize processing performance
- Archive old database records